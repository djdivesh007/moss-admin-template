<!DOCTYPE html>
<html lang="en">

<head>
    @@include('../partials/head.html')
</head>

<body>
    <div class="overlay-mask"></div>
    <div class="main-wrapper">
        @@include('../partials/menu.html')
        <div class="right-area">
            @@include('../partials/header.html')
            <div class="main-content container">
                <div class="page-header">
                    <span class="h2">Kanban</span>
                    <small>Optimize your workflow...</small>
                </div>
                <div class="row kb-board-app">
                    <div class="container-fluid kb-container">
                        <div class="row flex-row flex-sm-nowrap py-2">
                            <div class="col col-md-auto kb-board-list">
                                <div class="kb-list-body card shadow">
                                    <div class="kb-list-title">
                                        <h4 class="text-truncate p-2" contenteditable="true">To Do</h4>
                                        <span class="flex-fill"></span>
                                        <span class="material-icons p-2">more_vert</span>
                                    </div>
                                    <div class="items">
                                        <div class="card draggable shadow " id="item-1" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-success">
                                                <span class="badge badge-pill badge-primary">On priority</span>
                                                <div class="pb-2 pt-1 kb-item-content">This is a description of a item on the board.</div>
                                                <div class="row mt-3">
                                                    <div class="col">
                                                        <div class="actions">
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">reply</i></button>
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">delete</i></button>
                                                        </div>
                                                    </div>
                                                    <div class="col text-right">
                                                        <div class="avatar-group">
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-1.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-2.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs avatar bg-primary">
                                                                <img src="assets/images/avatar/team-3.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                        <div class="card draggable shadow" id="item-2" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-danger">
                                                <span class="badge badge-pill badge-primary">Hold</span>
                                                <div class="pb-2 pt-1 kb-item-content">One liner description</div>
                                                <div class="actions">
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">reply</i></button>
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">delete</i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                    </div>
                                    <div class="text-center">
                                        <button class="btn btn-outline-light btn-block btn-animated btn-sm mt-3">
                      <i class="material-icons">add</i>
                      <span>add new</span>
                    </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col col-md-auto kb-board-list">
                                <div class="kb-list-body card shadow">
                                    <div class="kb-list-title">
                                        <h4 class="text-truncate p-2" contenteditable="true">To Do</h4>
                                        <span class="flex-fill"></span>
                                        <span class="material-icons p-2">more_vert</span>
                                    </div>
                                    <div class="items">
                                        <div class="card draggable shadow " id="item-1" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-success">
                                                <span class="badge badge-pill badge-primary">On priority</span>
                                                <div class="pb-2 pt-1 kb-item-content">This is a description of a item on the board.</div>
                                                <div class="row mt-3">
                                                    <div class="col">
                                                        <div class="actions">
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">reply</i></button>
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">delete</i></button>
                                                        </div>
                                                    </div>
                                                    <div class="col text-right">
                                                        <div class="avatar-group">
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-1.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-2.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs avatar bg-primary">
                                                                <img src="assets/images/avatar/team-3.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                        <div class="card draggable shadow" id="item-2" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-danger">
                                                <span class="badge badge-pill badge-primary">Hold</span>
                                                <div class="pb-2 pt-1 kb-item-content">One liner description</div>
                                                <div class="actions">
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">reply</i></button>
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">delete</i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                    </div>
                                    <div class="text-center">
                                        <button class="btn btn-outline-light btn-block btn-animated btn-sm mt-3">
                      <i class="material-icons">add</i>
                      <span>add new</span>
                    </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col col-md-auto kb-board-list">
                                <div class="kb-list-body card shadow">
                                    <div class="kb-list-title">
                                        <h4 class="text-truncate p-2" contenteditable="true">To Do</h4>
                                        <span class="flex-fill"></span>
                                        <span class="material-icons p-2">more_vert</span>
                                    </div>
                                    <div class="items">
                                        <div class="card draggable shadow " id="item-1" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-success">
                                                <span class="badge badge-pill badge-primary">On priority</span>
                                                <div class="pb-2 pt-1 kb-item-content">This is a description of a item on the board.</div>
                                                <div class="row mt-3">
                                                    <div class="col">
                                                        <div class="actions">
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">reply</i></button>
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">delete</i></button>
                                                        </div>
                                                    </div>
                                                    <div class="col text-right">
                                                        <div class="avatar-group">
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-1.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-2.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs avatar bg-primary">
                                                                <img src="assets/images/avatar/team-3.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                        <div class="card draggable shadow" id="item-2" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-danger">
                                                <span class="badge badge-pill badge-primary">Hold</span>
                                                <div class="pb-2 pt-1 kb-item-content">One liner description</div>
                                                <div class="actions">
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">reply</i></button>
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">delete</i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                    </div>
                                    <div class="text-center">
                                        <button class="btn btn-outline-light btn-block btn-animated btn-sm mt-3">
                      <i class="material-icons">add</i>
                      <span>add new</span>
                    </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col col-md-auto kb-board-list">
                                <div class="kb-list-body card shadow">
                                    <div class="kb-list-title">
                                        <h4 class="text-truncate p-2" contenteditable="true">To Do</h4>
                                        <span class="flex-fill"></span>
                                        <span class="material-icons p-2">more_vert</span>
                                    </div>
                                    <div class="items">
                                        <div class="card draggable shadow " id="item-1" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-success">
                                                <span class="badge badge-pill badge-primary">On priority</span>
                                                <div class="pb-2 pt-1 kb-item-content">This is a description of a item on the board.</div>
                                                <div class="row mt-3">
                                                    <div class="col">
                                                        <div class="actions">
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">reply</i></button>
                                                            <button class="btn btn-outline-default btn-xs btn-square"><i
                                  class="material-icons">delete</i></button>
                                                        </div>
                                                    </div>
                                                    <div class="col text-right">
                                                        <div class="avatar-group">
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-1.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs bg-primary">
                                                                <img src="assets/images/avatar/team-2.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                            <div class="avatar avatar-xs avatar bg-primary">
                                                                <img src="assets/images/avatar/team-3.jpg" class="avatar-img rounded-circle" alt="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                        <div class="card draggable shadow" id="item-2" draggable="true" ondragstart="drag(event)">
                                            <div class="card-body p-2 theme-danger">
                                                <span class="badge badge-pill badge-primary">Hold</span>
                                                <div class="pb-2 pt-1 kb-item-content">One liner description</div>
                                                <div class="actions">
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">reply</i></button>
                                                    <button class="btn btn-outline-default btn-xs btn-square"><i
                              class="material-icons">delete</i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"></div>
                                    </div>
                                    <div class="text-center">
                                        <button class="btn btn-outline-light btn-block btn-animated btn-sm mt-3">
                      <i class="material-icons">add</i>
                      <span>add new</span>
                    </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @@include('../partials/js.html')
    <script>
        const drag = (event) => {
            event.dataTransfer.setData("text/plain", event.target.id);
        }

        const allowDrop = (ev) => {
            ev.preventDefault();
            if (hasClass(ev.target, "dropzone")) {
                addClass(ev.target, "droppable");
            }
        }

        const clearDrop = (ev) => {
            removeClass(ev.target, "droppable");
        }

        const drop = (event) => {
            event.preventDefault();
            const data = event.dataTransfer.getData("text/plain");
            const element = document.querySelector(`#${data}`);
            try {
                // remove the spacer content from dropzone
                event.target.removeChild(event.target.firstChild);
                // add the draggable content
                event.target.appendChild(element);
                // remove the dropzone parent
                unwrap(event.target);
            } catch (error) {
                console.warn("can't move the item to the same place")
            }
            updateDropzones();
        }

        const updateDropzones = () => {
            /* after dropping, refresh the drop target areas
              so there is a dropzone after each item
              using jQuery here for simplicity */

            var dz = $('<div class="dropzone rounded" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDrop(event)"> &nbsp; </div>');

            // delete old dropzones
            $('.dropzone').remove();

            // insert new dropdzone after each item   
            dz.insertAfter('.card.draggable');

            // insert new dropzone in any empty swimlanes
            $(".items:not(:has(.card.draggable))").append(dz);
        };

        // helpers
        function hasClass(target, className) {
            return new RegExp('(\\s|^)' + className + '(\\s|$)').test(target.className);
        }

        function addClass(ele, cls) {
            if (!hasClass(ele, cls)) ele.className += " " + cls;
        }

        function removeClass(ele, cls) {
            if (hasClass(ele, cls)) {
                var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
                ele.className = ele.className.replace(reg, ' ');
            }
        }

        function unwrap(node) {
            node.replaceWith(...node.childNodes);
        }
    </script>
</body>

</html>